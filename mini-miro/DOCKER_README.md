# Mini-Miro Docker ì»¨í…Œì´ë„ˆí™” ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

Mini-Miro ë‹¤ì´ì–´ê·¸ë¨ ì•±ì˜ Docker ì»¨í…Œì´ë„ˆí™” ì„¤ê³„ ë° ìš´ì˜ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx Proxy   â”‚    â”‚   React Client  â”‚    â”‚  Node.js API    â”‚
â”‚   (Port 80)     â”‚â—„â”€â”€â”€â”¤   (Port 3000)   â”‚â—„â”€â”€â”€â”¤   (Port 5000)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                       â”‚                       â”‚
          â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Balance   â”‚    â”‚   Static Files  â”‚    â”‚  SQLite Volume  â”‚
â”‚  SSL Terminate  â”‚    â”‚   Hot Reload    â”‚    â”‚  Data Persist   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ê°œë°œ í™˜ê²½

```bash
# ê°œë°œ í™˜ê²½ ì‹œì‘
./scripts/dev.sh start

# ë¡œê·¸ í™•ì¸
./scripts/dev.sh logs

# ì¢…ë£Œ
./scripts/dev.sh stop
```

### í”„ë¡œë•ì…˜ ë°°í¬

```bash
# í™˜ê²½ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ ìˆ˜ì • í•„ìš”

# í”„ë¡œë•ì…˜ ë°°í¬
./scripts/deploy.sh
```

## ğŸ“¦ ì„œë¹„ìŠ¤ êµ¬ì„±

### Frontend (React + Nginx)
- **ê°œë°œ**: Hot reload ì§€ì›, í¬íŠ¸ 3000
- **í”„ë¡œë•ì…˜**: Nginx ì •ì  ì„œë¹™, í¬íŠ¸ 80
- **ê¸°ëŠ¥**: React Router ì§€ì›, API í”„ë¡ì‹œ, ì •ì  ìì‚° ìºì‹±

### Backend (Node.js + Express)
- **API**: RESTful API ë° Socket.IO
- **ë°ì´í„°ë² ì´ìŠ¤**: SQLite with ë³¼ë¥¨ ì§€ì†ì„±
- **ëª¨ë‹ˆí„°ë§**: í—¬ìŠ¤ì²´í¬ ë° ë¡œê¹…

### ë„¤íŠ¸ì›Œí¬ ë° ë³¼ë¥¨
- **ë„¤íŠ¸ì›Œí¬**: ê²©ë¦¬ëœ ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬
- **ë³¼ë¥¨**: ë°ì´í„°ë² ì´ìŠ¤ ì§€ì†ì„±, ë¡œê·¸ ì €ì¥
- **ë°±ì—…**: ìë™ ì¼ì¼ ë°±ì—… ì„œë¹„ìŠ¤

## ğŸ› ï¸ ê°œë°œ í™˜ê²½

### ë¡œì»¬ ê°œë°œ ì‹œì‘
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
./scripts/dev.sh install

# ê°œë°œ ì„œë²„ ì‹œì‘ (Hot Reload)
./scripts/dev.sh start
```

### ì ‘ê·¼ URL
- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:5000
- **Database Viewer**: http://localhost:8080
- **Debug Port**: 9229

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./scripts/dev.sh test

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
./scripts/dev.sh logs frontend
./scripts/dev.sh logs backend
```

## ğŸš€ í”„ë¡œë•ì…˜ ë°°í¬

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Docker Engine 20.10+
- Docker Compose 2.0+
- 80/443 í¬íŠ¸ ì‚¬ìš© ê°€ëŠ¥

### ë°°í¬ ê³¼ì •
1. **í™˜ê²½ ì„¤ì •**: `.env` íŒŒì¼ êµ¬ì„±
2. **ë°±ì—… ìƒì„±**: ê¸°ì¡´ ë°ì´í„° ìë™ ë°±ì—…
3. **ì´ë¯¸ì§€ ë¹Œë“œ**: ìµœì í™”ëœ í”„ë¡œë•ì…˜ ë¹Œë“œ
4. **ì„œë¹„ìŠ¤ ë°°í¬**: ë¬´ì¤‘ë‹¨ ë°°í¬
5. **í—¬ìŠ¤ì²´í¬**: ìë™ ìƒíƒœ í™•ì¸

### í™˜ê²½ ë³€ìˆ˜
```bash
# í•„ìˆ˜ ì„¤ì •
NODE_ENV=production
PORT=5000
DB_PATH=/app/data/minimiro.db

# ë³´ì•ˆ ì„¤ì •
SESSION_SECRET=your-secure-session-secret
JWT_SECRET=your-secure-jwt-secret
CORS_ORIGIN=https://yourdomain.com
```

## ğŸ”§ ìš´ì˜ ê´€ë¦¬

### ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
```bash
# í”„ë¡œë•ì…˜ ìƒíƒœ
docker-compose -f docker-compose.prod.yml ps

# ê°œë°œ ìƒíƒœ
./scripts/dev.sh status
```

### ë¡œê·¸ ê´€ë¦¬
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸
docker-compose -f docker-compose.prod.yml logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose -f docker-compose.prod.yml logs backend
```

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
docker run --rm \
  -v mini-miro-database:/data:ro \
  -v $(pwd)/backups:/backup \
  alpine:latest \
  cp /data/minimiro.db /backup/manual-backup-$(date +%Y%m%d).db

# ë°ì´í„°ë² ì´ìŠ¤ ë³µì›
docker run --rm \
  -v mini-miro-database:/data \
  -v $(pwd)/backups:/backup \
  alpine:latest \
  cp /backup/your-backup.db /data/minimiro.db
```

## ğŸ” ëª¨ë‹ˆí„°ë§ ë° ì§„ë‹¨

### í—¬ìŠ¤ì²´í¬
- **Backend**: `GET /health` (30ì´ˆ ê°„ê²©)
- **Frontend**: HTTP 200 ì‘ë‹µ í™•ì¸
- **ìë™ ì¬ì‹œì‘**: 3íšŒ ì‹¤íŒ¨ì‹œ ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```bash
# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
docker stats

# ì»¨í…Œì´ë„ˆ ìƒì„¸ ì •ë³´
docker inspect mini-miro-frontend
docker inspect mini-miro-backend
```

### ë¬¸ì œ í•´ê²°
```bash
# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
docker-compose -f docker-compose.prod.yml restart

# ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.prod.yml logs --tail=100

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ê·¼
docker exec -it mini-miro-backend sh
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ì»¨í…Œì´ë„ˆ ë³´ì•ˆ
- ë¹„ë£¨íŠ¸ ì‚¬ìš©ì ì‹¤í–‰ (nodejs ì‚¬ìš©ì)
- ìµœì†Œ ê¶Œí•œ ì›ì¹™ ì ìš©
- ë³´ì•ˆ í—¤ë” ìë™ ì„¤ì • (Nginx)

### ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
- ê²©ë¦¬ëœ Docker ë„¤íŠ¸ì›Œí¬
- í•„ìš”í•œ í¬íŠ¸ë§Œ ì™¸ë¶€ ë…¸ì¶œ
- CORS ì„¤ì • ë° ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ

### ë°ì´í„° ë³´ì•ˆ
- ë³¼ë¥¨ì„ í†µí•œ ë°ì´í„° ì§€ì†ì„±
- ìë™ ë°±ì—… ë° ë³´ê´€ ì •ì±…
- í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•œ ë¯¼ê°ì •ë³´ ê´€ë¦¬

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ìˆ˜í‰ í™•ì¥
- Load Balancer ì¶”ê°€ (Nginx, HAProxy)
- Database í´ëŸ¬ìŠ¤í„°ë§ (PostgreSQL ë§ˆì´ê·¸ë ˆì´ì…˜)
- Redis ì„¸ì…˜ ìŠ¤í† ì–´

### ìˆ˜ì§ í™•ì¥
- ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì •
- ë©”ëª¨ë¦¬ ë° CPU ìµœì í™”
- ìºì‹± ì „ëµ êµ¬í˜„

## ğŸš¨ ìš´ì˜ ì¤‘ ì£¼ì˜ì‚¬í•­

1. **ë°ì´í„°ë² ì´ìŠ¤**: SQLiteëŠ” ë‹¨ì¼ ì—°ê²° ì œí•œì´ ìˆìœ¼ë¯€ë¡œ ê³ ë¶€í•˜ì‹œ PostgreSQL ê³ ë ¤
2. **ë¡œê·¸**: ë¡œê·¸ ë¡œí…Œì´ì…˜ ì„¤ì •ìœ¼ë¡œ ë””ìŠ¤í¬ ìš©ëŸ‰ ê´€ë¦¬
3. **ë°±ì—…**: ì •ê¸°ì ì¸ ë°±ì—… í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
4. **ëª¨ë‹ˆí„°ë§**: ìì› ì‚¬ìš©ëŸ‰ ë° ì‘ë‹µì‹œê°„ ëª¨ë‹ˆí„°ë§ í•„ìˆ˜
5. **ë³´ì•ˆ**: ì •ê¸°ì ì¸ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ ë° ì·¨ì•½ì  ìŠ¤ìº”

## ğŸ“ ì§€ì›

ë¬¸ì œ ë°œìƒì‹œ ë‹¤ìŒ ì •ë³´ì™€ í•¨ê»˜ ë¬¸ì˜:
- Docker ë° Docker Compose ë²„ì „
- ìš´ì˜ ì²´ì œ ì •ë³´
- ì—ëŸ¬ ë¡œê·¸ (docker-compose logs)
- ì»¨í…Œì´ë„ˆ ìƒíƒœ (docker-compose ps)